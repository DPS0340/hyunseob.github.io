<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Storybook 입문 가이드 | DailyEngineering</title><link rel="stylesheet" href="/libs/spoqa-han-sans-kr/css/SpoqaHanSans-kr.css"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://hyunseob.github.io/2018/01/08/storybook-beginners-guide/"/>
<meta name="description" content="페이지 단위의 개발이 이루어지던 과거와 달리 요즘의 프론트엔드 개발은 주로 컴포넌트 단위로 이루어진다. 이 컴포넌트라는 개념은 사용하는 라이브러리나 프레임워크에 따라 구현 방식이 다르지만, 철학은 거의 동일하다. 원래 컴포넌트는 외부 상태의 영향을…">
<meta name="keywords" content="React,Storybook">
<meta property="og:type" content="article">
<meta property="og:title" content="Storybook 입문 가이드">
<meta property="og:url" content="https://hyunseob.github.io/2018/01/08/storybook-beginners-guide/">
<meta property="og:site_name" content="DailyEngineering">
<meta property="og:description" content="페이지 단위의 개발이 이루어지던 과거와 달리 요즘의 프론트엔드 개발은 주로 컴포넌트 단위로 이루어진다. 이 컴포넌트라는 개념은 사용하는 라이브러리나 프레임워크에 따라 구현 방식이 다르지만, 철학은 거의 동일하다. 원래 컴포넌트는 외부 상태의 영향을…">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://hyunseob.github.io/images/storybook-beginners-guide/storybook.png">
<meta property="og:updated_time" content="2018-12-31T10:15:02.274Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Storybook 입문 가이드">
<meta name="twitter:description" content="페이지 단위의 개발이 이루어지던 과거와 달리 요즘의 프론트엔드 개발은 주로 컴포넌트 단위로 이루어진다. 이 컴포넌트라는 개념은 사용하는 라이브러리나 프레임워크에 따라 구현 방식이 다르지만, 철학은 거의 동일하다. 원래 컴포넌트는 외부 상태의 영향을…">
<meta name="twitter:image" content="https://hyunseob.github.io/images/storybook-beginners-guide/storybook.png">
<meta name="twitter:creator" content="@HyunSeob_">
<meta property="fb:app_id" content="https:&#x2F;&#x2F;www.facebook.com&#x2F;hyunseob.lee.7"><meta property="article:author" content="https://www.facebook.com/hyunseob.lee.7"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2018-01-08 01:51:48"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="HyunSeob"><link rel="icon" href="/images/icon.png"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="DailyEngineering"><meta name="google-site-verification" content="mMu6SM0h7dcqHRQMonyssDlALM7KLAr5HQHDQEL0yRU"><meta name="naver-site-verification" content="3ef8fdf091c71d652b72f4fe73b191c2246127f6"><script>(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-72857127-1', 'auto');
ga('send', 'pageview');</script></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/icon.png" alt="DailyEngineering"><span class="menu__item__link--brand__label">DailyEngineering</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div><div class="menu__item"><a class="menu__item__link" href="/resume">Resume</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Storybook 입문 가이드</h1><div class="article__meta"><time class="article__meta__time" datetime="2018-01-07T16:51:48.000Z" itemprop="datePublished">2018-01-08 01:51:48</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/FrontEnd/">FrontEnd</a></div></div><div class="article__contents"><img src="/images/storybook-beginners-guide/storybook.png"/><p>페이지 단위의 개발이 이루어지던 과거와 달리 요즘의 프론트엔드 개발은 주로 컴포넌트 단위로 이루어진다. 이 컴포넌트라는 개념은 사용하는 라이브러리나 프레임워크에 따라 구현 방식이 다르지만, 철학은 거의 동일하다. 원래 컴포넌트는 외부 상태의 영향을 받지않는 독립된 개체로서, 고립된 환경에서도 자신만의 스타일과 상태를 가질 수 있어야 한다. <a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener">React의 컴포넌트 정의</a>에 따르면, 컴포넌트가 UI를 독립적이고 재사용 가능한 단위로 분리하고 각 단위를 고립해서 생각할 수 있게 해준다고 설명한다.</p>
<p>이렇게 프론트엔드 개발의 패러다임이 컴포넌트로 넘어오면서 개발자들은 일종의 모순에 봉착했다. 개발은 컴포넌트 단위로 진행하지만 실제 개발환경은 항상 페이지 단위로 만들어진다는 점이다. 현재 개발하고 있는 서비스에서 사용하는 수 많은 버튼의 상태를 의존성과 환경변수가 걸려있는 페이지에서 일일이 코드를 변경해가며 테스트해야 했었고 여전히 그렇게 진행하고 있는 케이스도 있다. 이렇게 개발을 진행하게 되면 개발자는 온전히 뷰에 집중하기 어려워지고 컴포넌트의 의존성을 쉽사리 파악하기가 어려워진다. 컴포넌트를 진짜로 고립시키지 못하게 되는 것이다. 이는 당연히 컴포넌트의 재사용성을 감소시킨다.</p>
<p>Storybook은 이런 문제를 해결할 수 있는, 컴포넌트 단위의 개발 환경을 지원하는 도구다. 개발자가 뷰를 개발할 때 고립된 환경을 제공해서 관심사를 의존성과 환경으로부터 분리시켜 준다. 그리고 개발자는 비로소 뷰에 집중할 수 있게 되고, 외부 상태에 의존하지 않으면서 고립된 상태로 스스로를 표현하는 컴포넌트를 개발할 수 있게 된다.</p>
<p>이 글에서는 Storybook을 한 번도 사용해본 적 없는 사람을 대상으로 기본적인 사용법을 안내한다.</p>
<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>요즘 충분한 사용자를 갖추고 있는 여러가지 프론트엔드 프레임워크, 그러니까 React, Vue, Angular 등은 컴포넌트 단위의 개발을 기본으로 한다. Storybook은 React 뿐만 아니라 Vue도 지원하며, 최근에는 Angular도 지원하게 되었다. 이 글에서는 React로 예제를 진행할 것이다.</p>
<p>babel이나 webpack 관련 자잘한 설정을 하기에는 설명할 부분이 너무 많기도 하거니와 사실 글의 주제에도 맞지는 않으니, <a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">create-react-app</a>을 통해 프로젝트 스캐폴딩을 먼저 진행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ create-react-app storybook-playground</span><br></pre></td></tr></table></figure>
<p>스캐폴딩이 완료되었다면 본격적으로 Storybook을 설치한다. Storybook은 고유의 커맨드라인 인터페이스를 갖추고 있다. CLI를 설치하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$	 npm install -g @storybook/cli</span><br></pre></td></tr></table></figure>
<p>그리고 다음의 명령어를 사용하여 Storybook을 프로젝트 내에 설치하면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ getstorybook</span><br></pre></td></tr></table></figure>
<p>그러면 CLI가 알아서 적당히 필요한 의존성을 설치해주고, <code>package.json</code>에도 Storybook 실행 및 빌드 관련 명령어가 추가된다. 이제 실행 스크립트만 사용하면 Storybook이 실행된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run storybook</span><br></pre></td></tr></table></figure>
<p><img src="/images/storybook-beginners-guide/storybook-1.png" alt="Storybook 개발환경"></p>
<h1 id="Story-작성하기"><a href="#Story-작성하기" class="headerlink" title="Story 작성하기"></a>Story 작성하기</h1><p>프로젝트 내 <code>src</code> 폴더를 잘 살펴보면 <code>stories</code>라는 폴더가 새로 생긴 걸 확인할 수 있다. 이 폴더가 바로 Storybook에 실제로 올라가는 컴포넌트들을 정의하는 파일들이 있는 폴더다. 그 안의 <code>index.js</code> 파일을 잘 살펴보면 아까 웹 페이지에서 봤던 페이지의 사이드바에 있었던 컴포넌트를 정의하는 코드가 보일 것이다.</p>
<script src="https://gist.github.com/HyunSeob/9d6b7fed7588675835df766c82d45960.js"></script>

<p>보면 알겠지만, 문법은 컴포넌트를 <code>storiesOf</code> 함수로 감싼 뒤에, <code>add</code>로 여러가지 스토리를 추가하는 형태로 사용한다. 여기에서 스토리는 어떠한 환경일 수도 있고, 컴포넌트의 상태일 수도 있다. 예제에서는 <code>Button</code> 컴포넌트는 주입받는 데이터, 그러니까 텍스트와 이모지를 기준으로 스토리를 나누었는데, 뷰가 다르게 보일 수 있는 상태라면 무엇이든 스토리로 써도 된다. 여기에 딱히 엄격한 규칙은 없다. 버튼이라면 일반적으로 사이즈나 컬러, 혹은 <code>:hover</code> 나 <code>:disabled</code> 같은 상태도 별도의 스토리로 써도 된다.</p>
<p>먼저 Storybook을 경험해보기 위해서 새롭게 아주 간단한 컴포넌트와 스토리를 작성해보자.</p>
<script src="https://gist.github.com/HyunSeob/2f585754045a87b0107c73de60c21647.js"></script>

<p>아주 간단한 <code>Input</code> 컴포넌트를 작성하고, <code>index.js</code> 파일에 관련된 스토리를 추가했다. 이제 저장해서 웹페이지를 확인해보면 새로운 컴포넌트가 생긴 걸 확인해볼 수 있을 것이다.</p>
<h2 id="Action-작성하기"><a href="#Action-작성하기" class="headerlink" title="Action 작성하기"></a>Action 작성하기</h2><p><code>index.js</code>를 다시보면 Button의 <code>onClick</code> 이벤트에 <code>action</code>이라는 함수가 바인딩 되어있는 걸 볼 수 있다. 다시 웹페이지로 돌아가서 버튼을 클릭해보면 아래에 있는 Action Logger에 버튼을 클릭할 때마다 로그가 올라오는 것을 확인할 수 있다. <code>action</code>은 Storybook에서 사용하는 일종의 로깅용 함수다. 각종 이벤트와 함께 날아오는 데이터를 쉽게 볼 수 있다.</p>
<p>마침 우리가 만든 <code>Input</code> 컴포넌트는 이런 데이터를 확인하기에 아주 적합한 컴포넌트다. <code>Input</code>의 <code>onChange</code> 이벤트에 <code>action</code>을 걸어주자.</p>
<script src="https://gist.github.com/HyunSeob/748065c8326afcdd8b3d4c3a9a789aab.js"></script>

<p>그리고 다시 웹으로 돌아가서 <code>&lt;input&gt;</code> 요소 안에 타이핑을 해보면 로그가 계속해서 찍히는 걸 확인해 볼 수 있다. <code>action</code>은 이런 네이티브 이벤트 뿐만이 아니라 프로그래머가 직접 짠 이벤트에도 반응하도록 만들 수 있다.</p>
<p>주의할 점은, <code>action</code> 자체는 함수를 반환하는 함수이므로 이벤트에 바인딩해도 로그를 남기지 않는다는 것이다. 항상 문자열과 함께 함수를 실행시킨 결과를 이벤트에 바인딩하자.</p>
<h2 id="데코레이터-Decorator-추가하기"><a href="#데코레이터-Decorator-추가하기" class="headerlink" title="데코레이터(Decorator) 추가하기"></a>데코레이터(Decorator) 추가하기</h2><p>Storybook에서 말하는 데코레이터는 현재 Stage 2에 있는 ECMA 데코레이터 스펙과 무관하다. Storybook을 계속해서 사용하다보면 <code>width: 100%</code>인 컴포넌트들은 실제 페이지에 들어갈 때랑 다르게 보이거나, 컴포넌트가 좌상단에 너무 가까이 붙어있어서 전체적인 뷰를 보기에 좋지 않은 경우가 많다. 이 문제를 해결하기 위해서 가장 쉽게 사용할 수 있는 솔루션은 <code>margin</code>이나 <code>padding</code> 값을 가지고 있는 래핑 컴포넌트를 만들어서 테스트할 컴포넌트를 감싸주는 것이다. 이 방법의 문제는 모든 스토리에 래핑 컴포넌트를 번거롭게 일일이 추가시켜줘야 한다는 것이다.</p>
<p>데코레이터는 이러한 불편함을 해결해주는 기능이다. Story를 추가하기 전에 <code>addDecorator</code>라는 메소드를 통해 손쉽게 모든 스토리에 래핑 컴포넌트를 추가할 수 있다.</p>
<script src="https://gist.github.com/HyunSeob/021352d49c1e2425405be602bf932e88.js"></script>

<p><code>story</code>는 뒤에 나오는 스토리에서 선언한 컴포넌트를 렌더링하는 함수다. 적절한 래핑 컴포넌트 아래에서 <code>story</code> 함수를 실행시키는 식으로 선언해주면 된다.</p>
<p><code>addDecorator</code>는 스토리 사이에도 껴넣을 수 있는데, 그러면 <code>addDecorator</code>의 뒤에 있는 스토리들만 그 데코레이터의 영향을 받는다.</p>
<h2 id="애드온-설치하기-Background"><a href="#애드온-설치하기-Background" class="headerlink" title="애드온 설치하기: Background"></a>애드온 설치하기: Background</h2><p>실제 작업할 페이지의 배경색깔이 흰색인 경우 상관 없는데, 만약 회색이거나 혹은 뭔가 다른 색이라면 컴포넌트를 작성했을 때의 룩앤필이 페이지에 실제로 들어갔을 때와 좀 다르다고 느끼게 된다. 이런 문제를 개선하기 위해서 Storybook에 별도의 플러그인인 애드온(Add-on)을 설치할 수 있다. 위에서 다뤘던 <code>action</code>도 기본적으로 설치되어있는 애드온이다.</p>
<p>배경 색깔을 지원하기 위한 유틸리티는 크게 두 가지가 있는데, 하나는 데코레이터 형태의 <a href="https://github.com/jakelazaroff/react-storybook-decorator-background" target="_blank" rel="noopener">react-storybook-decorator-background</a>이고, 다른 하나는 <a href="https://www.npmjs.com/package/@storybook/addon-backgrounds" target="_blank" rel="noopener">Storybook Addon Backgrounds</a>이다. 둘 다 사용할 수 있지만 둘 중 후자를 추천한다. 전자는 <a href="https://github.com/jakelazaroff/react-storybook-decorator-background/issues/5" target="_blank" rel="noopener">HMR이 깨지는 버그</a>를 가지고 있고 유지보수도 중지된 것으로 보인다. 후자는 Storybook 레포에 포함되어있는 공식 애드온이라 유지보수가 중단될 일은 없을 것으로 예상된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install @storybook/addon-backgrounds --dev</span><br></pre></td></tr></table></figure>
<p>지금도 애드온을 설치하고 쉽게 까먹게 되는 것이, <code>.storybook/addons.js</code> 파일을 수정하는 것이다. Storybook에 설치하는 모든 애드온은 해당 파일에 등록되어야 한다.</p>
<script src="https://gist.github.com/HyunSeob/176df2434ee1f57d9f899d0009b00b17.js"></script>

<p>보이는 것처럼 <code>addon-actions</code>가 이미 등록되어있고 이 글에서 다루지 않은 <code>addon-links</code>도 등록되어있다. 추가로 <code>addon-backgrounds</code>를 등록해주면 사용 준비가 끝난다.</p>
<p>그리고 아까 데코레이터를 추가했던 것처럼 데코레이터를 추가하면 된다.</p>
<script src="https://gist.github.com/HyunSeob/0f2de2dbd9804054a7d8fbe7fa35f64d.js"></script>

<p>그러면 아래처럼 애드온 메뉴가 하나 추가가 되고, 컴포넌트에서 배경화면을 선택할 수 있다.</p>
<p><img src="/images/storybook-beginners-guide/storybook-backgrounds.gif" alt="Storybook Backgrounds Addon"></p>
<p>모든 컴포넌트에 이 배경화면 데코레이터를 적용하고 싶다면, <code>.storybook/config.js</code> 파일을 수정할 수도 있다.</p>
<script src="https://gist.github.com/HyunSeob/4c4f10dc6bf5b23ebbd4af817e707aa3.js"></script>

<p>이 글에서는 예제로 Background 애드온을 설치했지만 Storybook에는 유용한 애드온들이 많다. 그런 <a href="https://storybook.js.org/addons/addon-gallery/" target="_blank" rel="noopener">애드온들을 모아둔 페이지</a>도 있으니 한 번 구경해보고 자신의 프로젝트에 맞는 애드온을 선택해 설치하면 더 좋을 것이다.</p>
<h1 id="Storybook을-실제로-도입하기"><a href="#Storybook을-실제로-도입하기" class="headerlink" title="Storybook을 실제로 도입하기"></a>Storybook을 실제로 도입하기</h1><p>이렇게 앞에서 스토리를 쓰는 방법에 대해서 알아봤지만 이것만으로 실제 프로젝트에 도입하기는 충분치는 않다. 각 프로젝트 별로 사용하는 기술스택이나 요구사항이 서로 다를 수 있기 때문이다. 만약 모든 스토리들을 <code>index.js</code>에 써야한다면, 제 아무리 Storybook이 좋은 툴이라고 하더라도 도입하기가 매우 망설여질 것이다. 여기서는 Storybook을 실제로 프로젝트에 도입하면서 필요한 작업들을 간단하게 알아본다.</p>
<h2 id="Story-파일-로드-설정"><a href="#Story-파일-로드-설정" class="headerlink" title="Story 파일 로드 설정"></a>Story 파일 로드 설정</h2><p>편의상 지금까지는 스토리를 구분하지 않고 <code>index.js</code>에만 작성했으나, 스토리는 <code>index.js</code> 파일에만 작성할 수 있는 것이 아니다. 아까 잠시 살펴본 <code>.storybook/config.js</code> 파일을 다시 보면, <code>loadStories</code>라는 함수 안에 있는 <code>require</code> 구문을 확인할 수 있을 것이다. 즉, <code>loadStories</code>에서 로드하는 모든 파일에 있는 스토리들을 추가한다. 기본적으로 <code>stories/index.js</code> 파일만 로드할 뿐이다.</p>
<p>흔히 React에서 폴더 구조를 짤 때 흔히 접근하는 방법 중에 컴포넌트 별로 폴더를 따로 만들고 그 컴포넌트에 필요한 여러가지 파일들을 만드는 방식이 있다. 아래처럼,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── Input</span><br><span class="line">|   ├── index.js</span><br><span class="line">|   ├── Input.js</span><br><span class="line">|   ├── Input.scss</span><br><span class="line">|   └── Input.test.js</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure>
<p>Storybook도 컴포넌트 하나하나 스토리가 별도로 필요하기 때문에 <code>stories</code> 폴더 하나에 관리했다가는 곧 <code>stories</code> 폴더가 열기도 싫어지는 불상사가 일어날 것이다. 따라서 스토리 파일도 컴포넌트 별로 폴더에 관리하는 것을 추천한다. 아래처럼,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── Input</span><br><span class="line">|   ├── index.js</span><br><span class="line">|   ├── Input.js</span><br><span class="line">|   ├── Input.scss</span><br><span class="line">|   └── Input.stories.js</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure>
<p>이때 확장자는 <code>stories.js</code> 혹은 <code>story.js</code> 가 주로 사용되는 것 같다. 나는 보통 <code>stories.js</code>를 사용한다.</p>
<p>이렇게 하려면 위에서 말했던 것처럼, <code>loadStories</code> 함수를 수정해주면 된다.</p>
<script src="https://gist.github.com/HyunSeob/2b15a9031b222594728d84239c8a32cc.js"></script>

<p><a href="https://webpack.js.org/guides/dependency-management/#require-context" target="_blank" rel="noopener">require.context</a>는 webpack에서 지원하는 함수다. Storybook은 내부적으로 webpack을 사용하기 때문에 쓸 수 있다. 이렇게 하면 <code>src/components</code> 아래에 있는 폴더란 폴더는 다돌면서 <code>*.stories.js</code> 파일을 찾아 모두 로드시킨다.</p>
<h2 id="TypeScript-설정"><a href="#TypeScript-설정" class="headerlink" title="TypeScript 설정"></a>TypeScript 설정</h2><p>앞서 말했듯 Storybook은 webpack을 사용하며, 설정이 Customize 가능하다. 이 말은 물론 TypeScript를 지원한다는 말이 된다. ts-loader를 쓰면 되니까. TypeScript 설정 방법은 <a href="https://storybook.js.org/configurations/custom-webpack-config/#full-control-mode--default" target="_blank" rel="noopener">공식 사이트</a>에도 나와있다. 단지 <code>.storybook/webpack.config.js</code> 파일을 만들어서 아래와 같이 써주면 된다.</p>
<script src="https://gist.github.com/HyunSeob/4603b4055477aee47e184b90e84fa08c.js"></script>

<p>마찬가지로 Absolute Import 같은 것이 필요하다거나 하는, webpack의 설정을 건드려야 하는 상황이 있다면 다시 webpack.config.js를 수정하면 된다.</p>
<h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><p>Storybook은 컴포넌트 단위로 쪼개서 개발할 수 있는 개발환경이지만, 결국은 그 자체로 컴포넌트들의 카탈로그 혹은 말 그대로 책자가 된다. 이렇게 모아놓은 컴포넌트들은 약간의 문서화를 더한다면<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> 그 자체로도 인터랙티브한 문서가 되고, 디자이너 혹은 기획자와 협업하는 도구로 사용할 수도 있게 된다. 물론 이렇게 협업하는 도구로 사용하고 싶다면 배포가 필요하다.</p>
<p>Storybook은 기본적으로 서버가 없고, 완전한 정적 애셋만으로 구동이 가능하므로 어디에나 쉽게 배포할 수 있다. 흔히 알고 있는 정적 사이트 호스팅 서비스, GitHub Pages 혹은 AWS S3에도 물론 배포할 수 있고, 가볍게 쓰기에 좋은 Heroku나 now에도 올려놓을 수 있다.</p>
<p>가장 간편한 건 공식 지원이 있는 GitHub Pages다. Storybook에서는 <a href="https://github.com/storybooks/storybook-deployer" target="_blank" rel="noopener">storybook-deployer</a>라는 배포 툴을 지원한다. 하지만 오픈 소스가 아닌이상, GitHub Pages에 배포하기는 조금 꺼려지기 마련이다.</p>
<p>AWS S3도 쉬운 선택지 중에 하나지만, AWS 계정도 있어야되고 셋업하기 귀찮은 면도 있으므로 상대적으로 간단한 솔루션인데다 무료인 <a href="https://zeit.co/now" target="_blank" rel="noopener">now</a>를 사용해서 예제를 진행할 것이다. now도 다루자면 세부적인 설정이 많기 때문에 필요한 부분만 간단히 다루겠다.</p>
<p>먼저 now CLI를 설치한다. now는 별도의 바이너리가 있어서 Node.js 없어도 구동이 가능하지만 이 글을 보고있는 사람들은 모두 Node.js가 설치되어 있을테니, npm으로 설치하는 게 가장 간단하다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g now</span><br></pre></td></tr></table></figure>
<p>now가 설치되었으면 본격적으로 Storybook을 빌드한다. 빌드 명령어는 이미 <code>package.json</code>에 포함되어있으니 그냥 실행만 하면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build-storybook</span><br></pre></td></tr></table></figure>
<p>빌드된 파일은 <code>storybook-static</code> 폴더에 모두 들어간다. 이제 빌드된 파일을 디플로이하면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ now deploy storybook-static</span><br></pre></td></tr></table></figure>
<p>회원가입이 아직 안되어있는 상태라면 회원가입이 필요할 것이다. 회원가입이 어렵지는 않으니 여기서 다루지는 않겠다. 디플로이가 완료되면 <code>.now.sh</code>로 끝나는 URL이 표시되며, 실제 그 URL로 접속하면 Storybook이 잘 나오는 걸 볼 수 있다.</p>
<p>하지만 now로 배포하면 URL에 랜덤하게 문자열이 붙는데, 매번 배포할 때마다 주소가 바뀌기 때문에 다른 사람들과 공유하기가 상당히 번거로워진다. 이걸 고정하기 위해서 alias 설정을 할 수 있다.</p>
<script src="https://gist.github.com/HyunSeob/5f786d0d4a12630e7e7276a01e4cc184.js"></script>

<p>위에서 이름이나 alias 필드 같은 경우는 프로젝트에 맞게 수정하면 된다. 그리고 아래처럼 명령어를 입력한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ now deploy storybook-static --<span class="built_in">local</span>-config=now.json</span><br></pre></td></tr></table></figure>
<p>name이나 public 설정이 안먹는 경우가 있는데 만약 그런 경우를 만난다면 다음과 같이 강제로 지정해주면 된다. 깊게 안봐서 그런지 아직 왜 그런지 모르겠는데.. 이 부분 아는 분 댓글 좀..</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ now deploy storybook-static --<span class="built_in">local</span>-config=now.json --public --name=&#123;프로젝트명&#125;</span><br></pre></td></tr></table></figure>
<p>마지막으로 alias 명령어도 입력해주면 고정된 주소로 배포할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ now <span class="built_in">alias</span> --<span class="built_in">local</span>-config=now.json</span><br></pre></td></tr></table></figure>
<p>성공한다면 <code>{프로젝트명}.now.sh 라는</code> 주소로 배포될 것이다. 이를 모아서 npm 스크립트로 만들어두면 간단하게 배포할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build-storybook &amp;&amp; now deploy storybook-static --<span class="built_in">local</span>-config=now.json &amp;&amp; now <span class="built_in">alias</span> --<span class="built_in">local</span>-config=now.json</span><br></pre></td></tr></table></figure>
<h1 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap up"></a>Wrap up</h1><p>해외에서 널리 알려진 것에 비해서 우리나라에서는 아직까지는 주위에서 사용사례가 흔치는 않은 것 같다. 사실 별로 어렵지도 않고, 이렇다 할 사용방법도 딱히 필요없는 Storybook을 굳이 이렇게 글까지 써가면서 설명한 건, 내가 Storybook을 도입 후 사용하면서 큰 만족감을 느꼈고 다른 개발자들도 쓰길 바라는 마음에서였다. 물론 나도 그렇게 오랫동안 사용하지는 않았지만. 나 같은 경우는 전혀 알지도 못하고 있다가 작년에 React Seoul에서 진겸님의 발표를 보고 뽕맞아서 시작하게 되었는데 그 <a href="https://www.youtube.com/watch?v=KnROzZ5Vszg" target="_blank" rel="noopener">발표영상</a>과 <a href="http://seoul.reactjs.kr/assets/slides/storybook_driven_development.pdf" target="_blank" rel="noopener">슬라이드</a>도 있으니 한 번 참고하시면 좋겟다.</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">마크다운으로 문서화를 할 수 있는 애드온도 있다.</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></div><div class="article__tags"><a class="article__tags__item" href="/tags/React/">React</a><a class="article__tags__item" href="/tags/Storybook/">Storybook</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="https://www.gravatar.com/avatar/84420953b2e0a28e39fbba241a8b680a" alt="HyunSeob"><a class="article__author__link" href="/resume" title="About HyunSeob" rel="author">HyunSeob</a><p class="article__author__desc">저만이 쓸 수 있는 글을 쓰도록 노력하겠습니다.</p><div class="article__author__socials"><a class="article__author__socials__item" href="https://github.com/HyunSeob" title="github" target="_blank"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="https://www.facebook.com/hyunseob.lee.7" title="facebook" target="_blank"><i class="fa fa-facebook"></i></a><a class="article__author__socials__item" href="https://www.linkedin.com/in/hyunseoblee/" title="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a><a class="article__author__socials__item" href="https://www.instagram.com/hyunseob.lee/" title="instagram" target="_blank"><i class="fa fa-instagram"></i></a><a class="article__author__socials__item" href="https://twitter.com/HyunSeob_" title="twitter" target="_blank"><i class="fa fa-twitter"></i></a><a class="article__author__socials__item" href="/atom.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="HyunSeob"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//dailyengineering.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2018-12-31T10:15:02.274Z"><meta itemprop="articleBody" content="페이지 단위의 개발이 이루어지던 과거와 달리 요즘의 프론트엔드 개발은 주로 컴포넌트 단위로 이루어진다. 이 컴포넌트라는 개념은 사용하는 라이브러리나 프레임워크에 따라 구현 방식이 다르지만, 철학은 거의 동일하다. 원래 컴포넌트는 외부 상태의 영향을 받지않는 독립된 개체로서, 고립된 환경에서도 자신만의 스타일과 상태를 가질 수 있어야 한다...."><meta itemprop="url" content="https://hyunseob.github.io/2018/01/08/storybook-beginners-guide/"><meta itemprop="mainEntityOfPage" content="https://hyunseob.github.io/2018/01/08/storybook-beginners-guide/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="DailyEngineering"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://hyunseob.github.io/images/icon.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://hyunseob.github.io/images/storybook-beginners-guide/storybook.png"><meta itemprop="url" content="https://hyunseob.github.io/images/storybook-beginners-guide/storybook.png"><meta itemprop="width" content="1200"><meta itemprop="height" content="630"></div></article><section class="related-posts"><h3>Related posts</h3><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2019/06/02/react-component-the-right-way/"><div class="related-posts__item__background" style="background-image:url('/images/react-component-the-right-way/banner.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">컴포넌트 제대로 만들기</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/06/24/debounce-react-synthetic-event/"><div class="related-posts__item__background" style="background-image:url('/images/debounce-react-synthetic-event.png');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">[React] Debounce SyntheticEvent</span></a></div><div class="related-posts__item__wrapper"><a class="related-posts__item" href="/2018/07/15/component-typing-in-react/"><div class="related-posts__item__background" style="background-image:url('/images/component-typing-in-react.jpg');"></div><div class="related-posts__item__overlay"></div><span class="related-posts__item__title">Component Typing in React</span></a></div></section></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/2019/12/31/2019-year-in-review/">2019년 돌아보기</a></li><li class="recent-posts__item"><a href="/2019/06/02/react-component-the-right-way/">컴포넌트 제대로 만들기</a></li><li class="recent-posts__item"><a href="/2019/05/26/google-io-2019-day-3/">Google I/O 2019: Day 3 후기</a></li><li class="recent-posts__item"><a href="/2019/05/12/google-io-2019-day-2/">Google I/O 2019: Day 2 후기</a></li><li class="recent-posts__item"><a href="/2019/05/09/google-io-2019-day-1/">Google I/O 2019: Day 1 후기</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Tag cloud</h3><div class="tag-cloud"><a href="/tags/AWS/" style="font-size: 0.88rem;">AWS</a> <a href="/tags/Agile/" style="font-size: 0.75rem;">Agile</a> <a href="/tags/Angular2/" style="font-size: 0.75rem;">Angular2</a> <a href="/tags/AngularJS/" style="font-size: 1.13rem;">AngularJS</a> <a href="/tags/Apex/" style="font-size: 0.75rem;">Apex</a> <a href="/tags/Attitude/" style="font-size: 0.75rem;">Attitude</a> <a href="/tags/Blog/" style="font-size: 1rem;">Blog</a> <a href="/tags/Build/" style="font-size: 0.75rem;">Build</a> <a href="/tags/CLI/" style="font-size: 0.75rem;">CLI</a> <a href="/tags/CSS/" style="font-size: 0.75rem;">CSS</a> <a href="/tags/Closure/" style="font-size: 0.88rem;">Closure</a> <a href="/tags/CoffeeScript/" style="font-size: 0.88rem;">CoffeeScript</a> <a href="/tags/ComputerScience/" style="font-size: 0.75rem;">ComputerScience</a> <a href="/tags/DOM/" style="font-size: 0.88rem;">DOM</a> <a href="/tags/DesignPattern/" style="font-size: 0.75rem;">DesignPattern</a> <a href="/tags/Deview/" style="font-size: 0.75rem;">Deview</a> <a href="/tags/ES2015/" style="font-size: 1.25rem;">ES2015</a> <a href="/tags/ESLint/" style="font-size: 0.75rem;">ESLint</a> <a href="/tags/Electron/" style="font-size: 0.75rem;">Electron</a> <a href="/tags/Functional/" style="font-size: 0.75rem;">Functional</a> <a href="/tags/GDG/" style="font-size: 1rem;">GDG</a> <a href="/tags/Google-I-O/" style="font-size: 1rem;">Google I/O</a> <a href="/tags/GraphQL/" style="font-size: 0.75rem;">GraphQL</a> <a href="/tags/Hexo/" style="font-size: 0.75rem;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 1.5rem;">JavaScript</a> <a href="/tags/Log/" style="font-size: 1.25rem;">Log</a> <a href="/tags/MobX/" style="font-size: 0.88rem;">MobX</a> <a href="/tags/Node-js/" style="font-size: 1.25rem;">Node.js</a> <a href="/tags/ORM/" style="font-size: 0.75rem;">ORM</a> <a href="/tags/Opinion/" style="font-size: 1.13rem;">Opinion</a> <a href="/tags/Promise/" style="font-size: 0.75rem;">Promise</a> <a href="/tags/Q-js/" style="font-size: 0.75rem;">Q.js</a> <a href="/tags/React/" style="font-size: 1.38rem;">React</a> <a href="/tags/Reactive/" style="font-size: 0.88rem;">Reactive</a> <a href="/tags/ReactiveX/" style="font-size: 0.75rem;">ReactiveX</a> <a href="/tags/RxJS/" style="font-size: 0.75rem;">RxJS</a> <a href="/tags/Sequelize-js/" style="font-size: 0.75rem;">Sequelize.js</a> <a href="/tags/Storybook/" style="font-size: 0.75rem;">Storybook</a> <a href="/tags/Terminology/" style="font-size: 0.75rem;">Terminology</a> <a href="/tags/Testing/" style="font-size: 0.75rem;">Testing</a> <a href="/tags/Tool/" style="font-size: 0.75rem;">Tool</a> <a href="/tags/Translate/" style="font-size: 1.25rem;">Translate</a> <a href="/tags/Tutorial/" style="font-size: 1.13rem;">Tutorial</a> <a href="/tags/TypeScript/" style="font-size: 1.5rem;">TypeScript</a> <a href="/tags/Year-in-review/" style="font-size: 1rem;">Year in review</a> <a href="/tags/babel/" style="font-size: 0.75rem;">babel</a> <a href="/tags/jQuery/" style="font-size: 1rem;">jQuery</a> <a href="/tags/lodash/" style="font-size: 0.88rem;">lodash</a> <a href="/tags/underscore-js/" style="font-size: 1rem;">underscore.js</a> <a href="/tags/webpack/" style="font-size: 1rem;">webpack</a></div></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Book/">Book</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ComputerScience/">ComputerScience</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">28</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/AngularJS/">AngularJS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/Basic/">Basic</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/DesignPattern/">DesignPattern</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/ES2015/">ES2015</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/React/">React</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/RxJS/">RxJS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/TypeScript/">TypeScript</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/lodash-underscore/">lodash/underscore</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Log/">Log</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Opinion/">Opinion</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Server/">Server</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Server/AWS/">AWS</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>© 2019 HyunSeob<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external" target="_blank">HyunSeob</a></small></p></footer><!--[if lt IE 10]><script src="/js/classList.min.js"></script><![endif]--><script src="/js/index.min.js"></script></body></html>